command memo.

[[dummy file]]
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20221220.log bs=1M count=540
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20221221.log bs=1M count=580
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20221222.log bs=1M count=390
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20221223.log bs=1M count=680
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20221224.log bs=1M count=100

[[dummy file update]]
touch -d "2022-12-20 11:56" /var/www/BA/share/admin/storage/api_logs/api-log-20221220.log
touch -d "2022-12-21 00:06" /var/www/BA/share/admin/storage/api_logs/api-log-20221221.log
touch -d "2022-12-22 10:03" /var/www/BA/share/admin/storage/api_logs/api-log-20221222.log
touch -d "2022-12-23 20:30" /var/www/BA/share/admin/storage/api_logs/api-log-20221223.log
touch -d "2022-12-24 21:34" /var/www/BA/share/admin/storage/api_logs/api-log-20221224.log

[[shell command]]
sh del_files.sh /var/www/BA/share/admin/storage/api_logs/ 2022/12/31

---

[[dummy file]]
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220101.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220102.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220103.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220104.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220105.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220106.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220107.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220108.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220109.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220110.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220111.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220112.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220113.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220114.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220115.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220116.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220117.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220118.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220119.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220120.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220121.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220122.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220123.log bs=1M count=250
dd if=/dev/zero of=/var/www/BA/share/admin/storage/api_logs/api-log-20220124.log bs=1M count=250


[[dummy file update]]
touch -d "2022-01-01 11:56" /var/www/BA/share/admin/storage/api_logs/api-log-20220101.log
touch -d "2022-01-02 00:06" /var/www/BA/share/admin/storage/api_logs/api-log-20220102.log
touch -d "2022-01-03 10:03" /var/www/BA/share/admin/storage/api_logs/api-log-20220103.log
touch -d "2022-01-04 20:30" /var/www/BA/share/admin/storage/api_logs/api-log-20220104.log
touch -d "2022-01-05 21:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220105.log
touch -d "2022-01-06 10:03" /var/www/BA/share/admin/storage/api_logs/api-log-20220106.log
touch -d "2022-01-07 20:30" /var/www/BA/share/admin/storage/api_logs/api-log-20220107.log
touch -d "2022-01-08 21:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220108.log
touch -d "2022-01-09 00:56" /var/www/BA/share/admin/storage/api_logs/api-log-20220109.log
touch -d "2022-01-10 20:56" /var/www/BA/share/admin/storage/api_logs/api-log-20220110.log
touch -d "2022-01-11 03:05" /var/www/BA/share/admin/storage/api_logs/api-log-20220111.log
touch -d "2022-01-12 21:31" /var/www/BA/share/admin/storage/api_logs/api-log-20220112.log
touch -d "2022-01-13 21:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220113.log
touch -d "2022-01-14 13:13" /var/www/BA/share/admin/storage/api_logs/api-log-20220114.log
touch -d "2022-01-15 23:50" /var/www/BA/share/admin/storage/api_logs/api-log-20220115.log
touch -d "2022-01-16 00:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220116.log
touch -d "2022-01-17 01:06" /var/www/BA/share/admin/storage/api_logs/api-log-20220117.log
touch -d "2022-01-18 10:06" /var/www/BA/share/admin/storage/api_logs/api-log-20220118.log
touch -d "2022-01-19 19:23" /var/www/BA/share/admin/storage/api_logs/api-log-20220119.log
touch -d "2022-01-20 22:36" /var/www/BA/share/admin/storage/api_logs/api-log-20220120.log
touch -d "2022-01-21 23:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220121.log
touch -d "2022-01-22 11:33" /var/www/BA/share/admin/storage/api_logs/api-log-20220122.log
touch -d "2022-01-23 22:30" /var/www/BA/share/admin/storage/api_logs/api-log-20220123.log
touch -d "2022-01-24 01:34" /var/www/BA/share/admin/storage/api_logs/api-log-20220124.log


nice -n 19 sh del_files.sh /var/www/BA/share/admin/storage/api_logs 2022/01/31



※killコマンド実行時に他プロセスに影響がないことを確認する
1.ターミナル１
　　PIDを特定
　　top
2.ターミナル２
　　リソースの状態を観察
　　vmstat -t 1 | tee /home/net.shinya/vmstat.log
3.ターミナル３
　　シェル実行（sleepコマンドで実行を停止）
4.ターミナル４
　　kill -KILL [PID]



chattr -i /var/www/BA/share/admin/storage/api_logs/api-log-20221221.log


[root@sakura net.shinya]# nice -n 19 sh del_files.sh /var/www/BA/share/admin/storage/api_logs 2022/01/31
引数の確認をしてください。処理を進めてよろしいですか？  (y/n) :y
2023-01-22 13:07:37:185 started.
target log_dir=/var/www/BA/share/admin/storage/api_logs
limit date is 2022/01/31
Line=1:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220101.log:size=262144000
Line=2:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220102.log:size=262144000
Line=3:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220103.log:size=262144000
Line=4:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220104.log:size=262144000
Line=5:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220105.log:size=262144000
Line=6:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220106.log:size=262144000
Line=7:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220107.log:size=262144000
delete size=1835008000
2023-01-22 13:07:37 wait a second...
Line=8:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220108.log:size=262144000
Line=9:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220109.log:size=262144000
Line=10:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220110.log:size=262144000
Line=11:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220111.log:size=262144000
Line=12:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220112.log:size=262144000
Line=13:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220113.log:size=262144000
Line=14:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220114.log:size=262144000
delete size=1835008000
2023-01-22 13:08:37 wait a second...
Line=15:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220115.log:size=262144000
Line=16:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220116.log:size=262144000
Line=17:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220117.log:size=262144000
Line=18:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220118.log:size=262144000
Line=19:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220119.log:size=262144000
Line=20:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220120.log:size=262144000
Line=21:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220121.log:size=262144000
delete size=1835008000
2023-01-22 13:09:37 wait a second...
Line=22:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220122.log:size=262144000
Line=23:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220123.log:size=262144000
Line=24:OK:delete_file=/var/www/BA/share/admin/storage/api_logs/api-log-20220124.log:size=262144000
delete size=786432000
2023-01-22 13:10:37:505 finished.

